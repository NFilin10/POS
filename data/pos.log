/*C20*/SET SCHEMA PUBLIC
drop table if exists Purchase CASCADE 
drop table if exists Purchase_SoldItem CASCADE 
drop table if exists SoldItem CASCADE 
drop table if exists StockItem CASCADE 
drop table if exists TeamMember CASCADE 
drop table if exists users CASCADE 
drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
create table Purchase (id bigint not null, date date, price double, time time, user_id bigint, primary key (id))
create table Purchase_SoldItem (Purchase_id bigint not null, items_id bigint not null)
create table SoldItem (id bigint not null, barcode bigint, name varchar(255), price double, quantity integer, primary key (id))
create table StockItem (id bigint not null, barcode bigint, name varchar(255), price double, quantity integer, primary key (id))
create table TeamMember (id bigint not null, email varchar(255), firstname varchar(255), lastname varchar(255), primary key (id))
create table users (id bigint not null, name varchar(255), password varchar(255) not null, role varchar(255), username varchar(255), primary key (id))
alter table Purchase_SoldItem add constraint UK_2mxstqfvnsb6v16dympr5bosq unique (items_id)
alter table Purchase add constraint FKc5pxmo7k6amr75sc6lb8cs46e foreign key (user_id) references users
alter table Purchase_SoldItem add constraint FKdtoutrs1wavgi7mwe5xl7raeh foreign key (items_id) references SoldItem
alter table Purchase_SoldItem add constraint FKadopm5srj6jsfmcgfgh5ba5sl foreign key (Purchase_id) references Purchase
DISCONNECT
