/*C3*/SET SCHEMA PUBLIC
drop table if exists Purchase CASCADE 
drop table if exists Purchase_SoldItem CASCADE 
drop table if exists SoldItem CASCADE 
drop table if exists StockItem CASCADE 
drop table if exists TeamMember CASCADE 
drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
create table Purchase (id bigint not null, date date, price double, time time, primary key (id))
create table Purchase_SoldItem (Purchase_id bigint not null, items_id bigint not null)
create table SoldItem (id bigint not null, barcode bigint, name varchar(255), price double, quantity integer, primary key (id))
create table StockItem (id bigint not null, barcode bigint, name varchar(255), price double, quantity integer, primary key (id))
create table TeamMember (id bigint not null, email varchar(255), firstname varchar(255), lastname varchar(255), primary key (id))
alter table Purchase_SoldItem add constraint UK_2mxstqfvnsb6v16dympr5bosq unique (items_id)
alter table Purchase_SoldItem add constraint FKdtoutrs1wavgi7mwe5xl7raeh foreign key (items_id) references SoldItem
alter table Purchase_SoldItem add constraint FKadopm5srj6jsfmcgfgh5ba5sl foreign key (Purchase_id) references Purchase
INSERT INTO STOCKITEM VALUES(1,1,'Lays chips',11.0E0,5)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 2
COMMIT
INSERT INTO STOCKITEM VALUES(2,2,'Chupa-chups',8.0E0,8)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 3
COMMIT
INSERT INTO STOCKITEM VALUES(3,3,'Frankfurters',15.0E0,12)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 4
COMMIT
INSERT INTO STOCKITEM VALUES(4,4,'Free Beer',0.0E0,100)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 5
COMMIT
INSERT INTO TEAMMEMBER VALUES(5,'artjom.siskov@ut.ee','Artjom','Shishkov')
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 6
COMMIT
INSERT INTO TEAMMEMBER VALUES(6,'nikita.filin@ut.ee','Nikita','Filin')
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 7
COMMIT
INSERT INTO TEAMMEMBER VALUES(7,'kaisa.kumpas@ut.ee','Kaisa','Kumpas')
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 8
COMMIT
INSERT INTO TEAMMEMBER VALUES(8,'alina.gudkova@ut.ee','Alina','Gudkova')
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 9
COMMIT
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 10
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
drop table if exists Purchase CASCADE 
drop table if exists Purchase_SoldItem CASCADE 
drop table if exists SoldItem CASCADE 
drop table if exists StockItem CASCADE 
drop table if exists TeamMember CASCADE 
drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
create table Purchase (id bigint not null, date date, price double, time time, primary key (id))
create table Purchase_SoldItem (Purchase_id bigint not null, items_id bigint not null)
create table SoldItem (id bigint not null, barcode bigint, name varchar(255), price double, quantity integer, primary key (id))
create table StockItem (id bigint not null, barcode bigint, name varchar(255), price double, quantity integer, primary key (id))
create table TeamMember (id bigint not null, email varchar(255), firstname varchar(255), lastname varchar(255), primary key (id))
alter table Purchase_SoldItem add constraint UK_2mxstqfvnsb6v16dympr5bosq unique (items_id)
alter table Purchase_SoldItem add constraint FKdtoutrs1wavgi7mwe5xl7raeh foreign key (items_id) references SoldItem
alter table Purchase_SoldItem add constraint FKadopm5srj6jsfmcgfgh5ba5sl foreign key (Purchase_id) references Purchase
INSERT INTO STOCKITEM VALUES(1,1,'Lays chips',11.0E0,5)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 2
COMMIT
INSERT INTO STOCKITEM VALUES(2,2,'Chupa-chups',8.0E0,8)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 3
COMMIT
INSERT INTO STOCKITEM VALUES(3,3,'Frankfurters',15.0E0,12)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 4
COMMIT
INSERT INTO STOCKITEM VALUES(4,4,'Free Beer',0.0E0,100)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 5
COMMIT
INSERT INTO TEAMMEMBER VALUES(5,'artjom.siskov@ut.ee','Artjom','Shishkov')
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 6
COMMIT
INSERT INTO TEAMMEMBER VALUES(6,'nikita.filin@ut.ee','Nikita','Filin')
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 7
COMMIT
INSERT INTO TEAMMEMBER VALUES(7,'kaisa.kumpas@ut.ee','Kaisa','Kumpas')
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 8
COMMIT
INSERT INTO TEAMMEMBER VALUES(8,'alina.gudkova@ut.ee','Alina','Gudkova')
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 9
COMMIT
INSERT INTO SOLDITEM VALUES(9,2,'Chupa-chups',8.0E0,1)
INSERT INTO PURCHASE VALUES(10,'2023-11-16',8.0E0,'17:28:37')
DELETE FROM STOCKITEM WHERE ID=2
INSERT INTO STOCKITEM VALUES(2,2,'Chupa-chups',8.0E0,7)
INSERT INTO PURCHASE_SOLDITEM VALUES(10,9)
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 11
COMMIT
DISCONNECT
